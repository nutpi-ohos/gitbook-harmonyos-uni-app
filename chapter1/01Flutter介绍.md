## Flutter æ¡†æ¶ä»‹ç»

Flutteræ˜¯è°·æ­Œçš„é«˜æ€§èƒ½ã€è·¨ç«¯UIæ¡†æ¶ï¼Œå¯ä»¥é€šè¿‡ä¸€å¥—ä»£ç ï¼Œæ”¯æŒiOSã€Androidã€Windows/MAC/Linuxç­‰å¤šä¸ªå¹³å°ï¼Œä¸”èƒ½è¾¾åˆ°åŸç”Ÿæ€§èƒ½ã€‚ Flutterä¹Ÿå¯ä»¥ä¸å¹³å°åŸç”Ÿä»£ç è¿›è¡Œæ··åˆå¼€å‘ã€‚åœ¨å…¨ä¸–ç•Œï¼ŒFlutteræ­£åœ¨è¢«è¶Šæ¥è¶Šå¤šçš„å¼€å‘è€…å’Œç»„ç»‡ä½¿ç”¨ï¼Œå¹¶ä¸”Flutteræ˜¯å®Œå…¨å…è´¹ã€å¼€æºçš„ã€‚

æœ¬æ¬¡æˆ‘ä»¬è¿™éƒ¨åˆ†æ˜¯åŸºäºç¤¾åŒºç‰ˆæœ¬3.7æ‰€ç¼–å†™ï¼Œä¹‹å‰åœ¨åšé¸¿è’™åŸç”Ÿåº”ç”¨å¼€å‘å¸ƒé“çš„æ—¶å€™ï¼Œå¾ˆå¤šäººéƒ½å¯¹Flutteré€‚é…é¸¿è’™æ¯”è¾ƒæ„Ÿå…´è¶£ï¼Œè¿™ä¸å°±æ¥äº†ã€‚

è¿™é‡Œå¤§å®¶è¦äº†è§£åˆ°çš„å°±æ˜¯Flutteræ˜¯æ¡†æ¶ï¼Œå¼€å‘è¯­è¨€æ˜¯Dartï¼Œç±»ä¼¼äºé¸¿è’™åŸç”Ÿåº”ç”¨å¼€å‘ä¸­ï¼ŒArkUIæ˜¯æ¡†æ¶ï¼ŒArkTSæ˜¯å¼€å‘è¯­è¨€ã€‚



## Flutteræ¶æ„

Flutter è¢«è®¾è®¡ä¸ºä¸€ä¸ªå¯æ‰©å±•çš„åˆ†å±‚ç³»ç»Ÿã€‚å®ƒå¯ä»¥è¢«çœ‹ä½œæ˜¯å„ä¸ªç‹¬ç«‹çš„ç»„ä»¶çš„ç³»åˆ—åˆé›†ï¼Œä¸Šå±‚ç»„ä»¶å„è‡ªä¾èµ–ä¸‹å±‚ç»„ä»¶ã€‚ç»„ä»¶æ— æ³•è¶Šæƒè®¿é—®æ›´åº•å±‚çš„å†…å®¹ï¼Œå¹¶ä¸”æ¡†æ¶å±‚ä¸­çš„å„ä¸ªéƒ¨åˆ†éƒ½æ˜¯å¯é€‰ä¸”å¯æ›¿ä»£çš„ã€‚æ¯ä¸€å—éƒ½å„å¸å…¶èŒï¼Œè´Ÿè´£è‡ªå·±çš„æ¨¡å—ã€‚

![Architectural diagram](https://luckly007.oss-cn-beijing.aliyuncs.com/uPic/archdiagram.png)

æ¥ä¸‹æ¥å°±æ˜¯ç¯å¢ƒé…ç½®

## é¸¿è’™ç‰ˆFlutterç¯å¢ƒæ­å»º

flutter_flutteré¡¹ç›®ï¼Œè¿™æ˜¯æˆ‘ä»¬æ•´ä¸ªå·¥ç¨‹çš„æ ¸å¿ƒï¼Œä½†æ˜¯å¾ˆå¤šäººéƒ½å€’åœ¨äº†ç¬¬ä¸€æ­¥ï¼Œå…¶åŸå› ï¼Œå°±æ˜¯â€”â€”éœ€è¦ä½¿ç”¨Devåˆ†æ”¯ï¼ï¼ï¼

https://gitee.com/openharmony-sig/flutter_flutter/tree/dev/

### æ³¨æ„äº‹é¡¹

ï¼ˆ1ï¼‰ç›®å‰æ”¯æŒæ“ä½œç³»ç»ŸLinuxã€Macã€Windowsç¯å¢ƒä¸‹ä½¿ç”¨
ï¼ˆ2ï¼‰macç³»ç»Ÿåœ¨ç»ˆç«¯è¾“å…¥"uname -m"åˆ¤æ–­ç³»ç»Ÿæ¶æ„é€‰æ‹©å¯¹åº”çš„å¼€å‘ç»„ä»¶å¥—
   å¦‚æœè¾“å‡ºç»“æœæ˜¯ x86_64ï¼Œåˆ™è¡¨ç¤ºä½ çš„ç³»ç»Ÿæ˜¯x86-64æ¶æ„
   å¦‚æœè¾“å‡ºç»“æœæ˜¯ arm64ï¼Œåˆ™è¡¨ç¤ºä½ çš„ç³»ç»Ÿæ˜¯arm64æ¶æ„
ï¼ˆ3ï¼‰IDEä½¿ç”¨å®˜æ–¹ä¸‹è½½åœ°å€
   æœ€æ–°å¥—ä»¶æ›´åŠ ç¨³å®šï¼Œæ€§èƒ½æ›´ä½³ï¼Œä¸”é¸¿è’™Flutteréœ€è¦ä¾èµ–æœ€æ–°å¥—ä»¶ç¼–è¯‘ 

æˆ‘ä»¬æ­¤æ¬¡ä¹Ÿæ˜¯ä»¥macå’Œwindowsä¸ºä¾‹æ¥å±•å¼€ã€‚

### ä¸‹è½½å¹¶å®‰è£…é¸¿è’™æœ€æ–°å¼€å‘å¥—ä»¶

é¸¿è’™å¼€å‘å¥—ä»¶å®˜æ–¹ä¸‹è½½åœ°å€ï¼š[https://developer.huawei.com/consumer/cn/download/](https://developer.huawei.com/consumer/cn/download/)

###  ä¸‹è½½é¸¿è’™ç‰ˆflutter

é¡¹ç›®åœ°å€ï¼šhttps://gitee.com/openharmony-sig/flutter_flutter

é€šè¿‡ä»£ç å·¥å…·ä¸‹è½½ä»“åº“ä»£ç å¹¶æŒ‡å®šdevæˆ–masteråˆ†æ”¯ï¼Œdevä¸æ–­åœ¨æ›´æ–°ç›¸æ¯”masteræ‹¥æœ‰æ›´å¤šåŠŸèƒ½

```
 git clone https://gitee.com/openharmony-sig/flutter_flutter.git
 git checkout -b dev origin/dev
```

### ç¯å¢ƒå˜é‡é…ç½®

open  ~/.bash_profile

```


export TOOL_HOME= /Applications/DevEco-Studio2.app/Contents 
export DEVECO_SDK_HOME=$TOOL_HOME/sdk 
export PATH=$TOOL_HOME/tools/ohpm/bin:$PATH 
export PATH=$TOOL_HOME/tools/hvigor/bin:$PATH 
export PATH=$TOOL_HOME/tools/node/bin:$PATH 
export PATH=/Users/jianguo/huawei/flutter_flutter/bin:$PATH
export PUB_HOSTED_URL=https://pub.flutter-io.cn
export FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn

```



ç„¶ååˆ·æ–°ä¸€ä¸‹

```
 source ~/.bash_profile
```

è¿™é‡Œé¢æ³¨æ„çš„å°±æ˜¯æ‰¾åˆ°DevEco-Studioçš„å®‰è£…ç›®å½•ï¼Œå› ä¸ºæˆ‘æ˜¯æœ¬åœ°æœ‰ä¸¤ä¸ªå®‰è£…ç›®å½•ï¼Œæ‰€ä»¥è¿™æ ·é…ç½®ã€‚

é…ç½®å®Œä»¥åï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿è¡ŒFlutter doctor -væ¥æ£€æµ‹ç¯å¢ƒå˜é‡æ˜¯å¦OKã€‚

![image-20240713183555890](https://luckly007.oss-cn-beijing.aliyuncs.com/uPic/image-20240713183555890.png)

é€šè¿‡ä¸Šé¢ä¹Ÿå¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬çš„ç¯å¢ƒé…ç½®OK

```
jianguo@jianguodeMacBook-Pro-2 harmonyflutter % flutter doctor -v 
[âœ“] Flutter (Channel stable, 3.13.0, on macOS 13.4.1 22F82 darwin-arm64, locale zh-Hans-CN)
    â€¢ Flutter version 3.13.0 on channel stable at /Users/jianguo/development/flutter
    â€¢ Upstream repository https://github.com/flutter/flutter.git
    â€¢ Framework revision efbf63d9c6 (11 ä¸ªæœˆå‰), 2023-08-15 21:05:06 -0500
    â€¢ Engine revision 1ac611c64e
    â€¢ Dart version 3.1.0
    â€¢ DevTools version 2.25.0
    â€¢ Pub download mirror https://pub.flutter-io.cn
    â€¢ Flutter download mirror https://storage.flutter-io.cn

[âœ“] Android toolchain - develop for Android devices (Android SDK version 34.0.0)
    â€¢ Android SDK at /Users/jianguo/Library/Android/sdk
    â€¢ Platform android-34, build-tools 34.0.0
    â€¢ ANDROID_HOME = /Users/jianguo/Library/Android/sdk
    â€¢ Java binary at: /Applications/Android Studio.app/Contents/jbr/Contents/Home/bin/java
    â€¢ Java version OpenJDK Runtime Environment (build 17.0.6+0-17.0.6b829.9-10027231)
    â€¢ All Android licenses accepted.

[âœ“] Xcode - develop for iOS and macOS (Xcode 14.3.1)
    â€¢ Xcode at /Applications/Xcode.app/Contents/Developer
    â€¢ Build 14E300c
    â€¢ CocoaPods version 1.11.0

[âœ“] Chrome - develop for the web
    â€¢ Chrome at /Applications/Google Chrome.app/Contents/MacOS/Google Chrome

[âœ“] Android Studio (version 2022.3)
    â€¢ Android Studio at /Applications/Android Studio.app/Contents
    â€¢ Flutter plugin can be installed from:
      ğŸ”¨ https://plugins.jetbrains.com/plugin/9212-flutter
    â€¢ Dart plugin can be installed from:
      ğŸ”¨ https://plugins.jetbrains.com/plugin/6351-dart
    â€¢ Java version OpenJDK Runtime Environment (build 17.0.6+0-17.0.6b829.9-10027231)

[âœ“] VS Code (version 1.90.2)
    â€¢ VS Code at /Applications/Visual Studio Code.app/Contents
    â€¢ Flutter extension version 3.92.0

[âœ“] Connected device (2 available)
    â€¢ macOS (desktop) â€¢ macos  â€¢ darwin-arm64   â€¢ macOS 13.4.1 22F82 darwin-arm64
    â€¢ Chrome (web)    â€¢ chrome â€¢ web-javascript â€¢ Google Chrome 126.0.6478.127

[âœ“] Network resources
    â€¢ All expected network resources are available.

â€¢ No issues found!

```



## é¡¹ç›®åˆ›å»º

åˆ›å»ºå·¥ç¨‹ä¸ç¼–è¯‘å‘½ä»¤ï¼Œç¼–è¯‘äº§ç‰©åœ¨${projectName}/ohos/entry/build/default/outputs/default/entry-default-signed.hapä¸‹

```
# åˆ›å»ºå·¥ç¨‹ æ–¹å¼ä¸€ è¯¥æ–¹å¼åªåˆ›å»ºäº†ohoså¹³å°
flutter create --platforms ohos <projectName> 

# åˆ›å»ºå·¥ç¨‹ æ–¹å¼äºŒ è¯¥æ–¹å¼åˆ›å»ºäº†android,ios,ohosä¸‰ä¸ªå¹³å°
flutter create  <projectName> 

# è¿›å…¥å·¥ç¨‹æ ¹ç›®å½•ç¼–è¯‘hapåŒ…
flutter build hap --local-engine=/Users/lihui/Documents/flutter_engine/src/out/ohos_debug_unopt_arm64 --debug
```



è¿™é‡Œæˆ‘é‡‡ç”¨ç¬¬ä¸€ç§ï¼Œ

```
flutter create --platforms ohos fluttertoharmony
```



å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œé¡¹ç›®åˆ›å»ºæˆåŠŸã€‚

![image-20240713172714711](https://luckly007.oss-cn-beijing.aliyuncs.com/uPic/image-20240713172714711.png)

```
jianguo@jianguodeMacBook-Pro-2 teaching % flutter create --platforms ohos harmonyflutter
Creating project harmonyflutter...
Running "flutter pub get" in harmonyflutter...
Resolving dependencies in harmonyflutter... 
+ async 2.10.0 (2.11.0 available)
+ boolean_selector 2.1.1
+ characters 1.2.1 (1.3.0 available)
+ clock 1.1.1
+ collection 1.17.0 (1.19.0 available)
+ cupertino_icons 1.0.6 (1.0.8 available)
+ fake_async 1.3.1
+ flutter 0.0.0 from sdk flutter
+ flutter_lints 2.0.3 (4.0.0 available)
+ flutter_test 0.0.0 from sdk flutter
+ js 0.6.5 (0.7.1 available)
+ lints 2.0.1 (4.0.0 available)
+ matcher 0.12.13 (0.12.16+1 available)
+ material_color_utilities 0.2.0 (0.12.0 available)
+ meta 1.8.0 (1.15.0 available)
+ path 1.8.2 (1.9.0 available)
+ sky_engine 0.0.99 from sdk flutter
+ source_span 1.9.1 (1.10.0 available)
+ stack_trace 1.11.0 (1.11.1 available)
+ stream_channel 2.1.1 (2.1.2 available)
+ string_scanner 1.2.0 (1.3.0 available)
+ term_glyph 1.2.1
+ test_api 0.4.16 (0.7.3 available)
+ vector_math 2.1.4
Changed 24 dependencies in harmonyflutter!
Wrote 43 files.

All done!
You can find general documentation for Flutter at: https://docs.flutter.dev/
Detailed API documentation is available at: https://api.flutter.dev/
If you prefer video documentation, consider: https://www.youtube.com/c/flutterdev

In order to run your application, type:

  $ cd harmonyflutter
  $ flutter run

Your application code is in harmonyflutter/lib/main.dart.
```





```
flutter build hap --local-engine=/Users/jianguo/huawei/flutter_engine/src/out/ohos_debug_unopt_arm64 --debug
```

## é¡¹ç›®ç¼–è¯‘ä¸è¿è¡Œ

é€šè¿‡flutter devicesæŒ‡ä»¤å‘ç°çœŸæœºè®¾å¤‡ä¹‹åï¼Œè·å–device-id



æ–¹å¼ä¸€ï¼šè¿›å…¥é¡¹ç›®ç›®å½•æŒ‡å®šæ„å»ºæ–¹å¼ç¼–è¯‘hapåŒ…å¹¶å®‰è£…åˆ°é¸¿è’™æ‰‹æœºä¸­

```
 flutter run --debug --local-engine=/Users/jianguo/huawei/flutter_engine/src/out/ohos_debug_unopt_arm64  -d <deviceId>
```

æ–¹å¼äºŒï¼šè¿›å…¥å·¥ç¨‹æ ¹ç›®å½•ç¼–è¯‘hapåŒ…,ç„¶åå®‰è£…åˆ°é¸¿è’™æ‰‹æœºä¸­

```
flutter build hap --local-engine=/Users/jianguo/huawei/flutter_engine/src/out/ohos_debug_unopt_arm64  --debug

hdc -t <deviceId> install <hap file path>
```

æ–¹å¼ä¸‰ï¼šä½¿ç”¨DevEcoStudio é€‰æ‹©è®¾å¤‡ä¸ºçœŸæœºï¼Œç‚¹å‡»å¯åŠ¨

è¿è¡Œåçš„æ•ˆæœï¼Œå¦‚å›¾æ‰€ç¤º

![image-20240713175215412](https://luckly007.oss-cn-beijing.aliyuncs.com/uPic/image-20240713175215412.png)

ä»Šå¤©è¿™ç¯‡æ–‡ç« å°±åˆ°æ­¤ç»“æŸï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œé¸¿è’™Flutterå·¥ç¨‹å·²ç»åˆå…·é›å½¢ï¼Œæ•´ä½“çš„é€‚é…æ•ˆæœè¿˜æ˜¯ä¸é”™çš„ã€‚

æœ€åå’Œå¤§å®¶è¯´ä¸€ä¸‹é¸¿è’™Flutterå¼€å‘çš„å¼€å‘æ–¹å¼ã€‚

## é¸¿è’™Flutterå¼€å‘

é¸¿è’™Flutterå¼€å‘æœ‰ä¸¤ç§æ¨¡å¼ï¼Œä¸€ç§æ˜¯ä»¥çº¯Flutterå·¥ç¨‹ä¸ºä¸»ï¼Œå³ä¸Šé¢çš„è¿™ç§æ¨¡å¼ï¼Œé¸¿è’™ä»£ç å†™åœ¨Flutterå·¥ç¨‹ä¸­ï¼Œå¦ä¸€ç§æ˜¯å’ŒAndroidã€iOSå¼€å‘ç±»ä¼¼ï¼Œé€šè¿‡ä¾èµ–é¸¿è’™Flutterçš„ç¼–è¯‘äº§ç‰©haræ¥è¿›è¡Œå¼€å‘ã€‚

ä»æŠ€æœ¯çš„è§’åº¦æ¥çœ‹ï¼Œç¬¬ä¸€ç§æ–¹æ¡ˆä¼šæ›´åŠ ç®€å•ï¼Œå› ä¸ºé¸¿è’™çš„Nativeä»£ç å·²ç»æ˜¯ç”³æ˜å¼äº†ï¼Œç±»ä¼¼Composeäº†ï¼Œæ‰€ä»¥åœ¨é¸¿è’™Nativeä»£ç ä¸­ä½¿ç”¨Flutteré¡µé¢æ˜¯éå¸¸ç®€å•çš„ä¸€ä»¶äº‹ï¼Œç”šè‡³å¯ä»¥ç›´æ¥å°†FlutterPage()å½“ä½œä¸€ä¸ªViewç›´æ¥ä½¿ç”¨ï¼Œæ‰€ä»¥é¸¿è’™Flutteræ··ç¼–ä¼šæ¯”Androidã€iOSæ–¹ä¾¿å¾ˆå¤šã€‚

è€Œå¦ä¸€ç§æ–¹å¼ï¼Œé€šè¿‡äº§ç‰©è¿›è¡Œä¾èµ–ï¼Œè¿™ç§æ–¹å¼æ›´åŠ ç¬¦åˆä¸‰ç«¯ç»Ÿä¸€çš„ç›®æ ‡ï¼Œä¹Ÿæ›´é€‚åˆå›¢é˜Ÿè¿›è¡Œè§£è€¦å’Œåä½œã€‚ä¸è¿‡è¿™ç§æ–¹å¼ä¹Ÿæœ‰ä¸€äº›é—®é¢˜ï¼Œé‚£å°±æ˜¯Flutterä¾èµ–çš„ä¸€äº›ç¬¬ä¸‰æ–¹åº“ï¼ŒåŒæ ·æ˜¯éœ€è¦é€‚é…é¸¿è’™ç‰ˆçš„ï¼Œæ‰€ä»¥åœ¨yamlä¸­ï¼Œç›¸å¯¹æ­£å¸¸çš„Flutteré¡¹ç›®æ¥è¯´åŒæ ·éœ€è¦è¿›è¡ŒåŒºåˆ†ã€‚è¿™é‡Œæœ€åæˆ‘ä¹Ÿç»™å¤§å®¶åˆ—å‡ºäº†Flutterçš„ä¸‰æ–¹åº“çš„é€‚é…è®¡åˆ’ã€‚

## å·²å…¼å®¹OpenHarmonyå¼€å‘çš„æŒ‡ä»¤åˆ—è¡¨

| æŒ‡ä»¤åç§°   | æŒ‡ä»¤æè¿°           | ä½¿ç”¨è¯´æ˜                                                     |
| ---------- | ------------------ | ------------------------------------------------------------ |
| doctor     | ç¯å¢ƒæ£€æµ‹           | flutter doctor                                               |
| config     | ç¯å¢ƒé…ç½®           | flutter config --<key> <value>                               |
| create     | åˆ›å»ºæ–°é¡¹ç›®         | flutter create --platforms ohos,android,ios --org <org> <appName> |
| create     | åˆ›å»ºmoduleæ¨¡æ¿     | flutter create -t module <module_name>                       |
| create     | åˆ›å»ºpluginæ¨¡æ¿     | flutter create -t plugin --platforms ohos,android,ios <plugin_name> |
| create     | åˆ›å»ºplugin_ffiæ¨¡æ¿ | flutter create -t plugin_ffi --platforms ohos,android,ios <plugin_name> |
| devices    | å·²è¿æ¥è®¾å¤‡æŸ¥æ‰¾     | flutter devices                                              |
| install    | åº”ç”¨å®‰è£…           | flutter install -t <deviceId> <hapæ–‡ä»¶è·¯å¾„>                  |
| assemble   | èµ„æºæ‰“åŒ…           | flutter assemble                                             |
| build      | æµ‹è¯•åº”ç”¨æ„å»º       | flutter build hap --debug [--target-platform ohos-arm64] [--local-engine=<å…¼å®¹ohosçš„debug engineäº§ç‰©è·¯å¾„>] |
| build      | æ­£å¼åº”ç”¨æ„å»º       | flutter build hap --release [--target-platform ohos-arm64] [--local-engine=<å…¼å®¹ohosçš„release engineäº§ç‰©è·¯å¾„>] |
| run        | åº”ç”¨è¿è¡Œ           | flutter run [--local-engine=<å…¼å®¹ohosçš„engineäº§ç‰©è·¯å¾„>]      |
| attach     | è°ƒè¯•æ¨¡å¼           | flutter attach                                               |
| screenshot | æˆªå±               | flutter screenshot                                           |



## å‚è€ƒ

Flutterç›¸å…³:
æ–‡æ¡£ï¼šhttps://gitee.com/openharmony-sig/flutter_samples/tree/master/ohos/docs
flutter sdkåº“
https://gitee.com/openharmony-sig/flutter_flutter
flutter engineæ‰©å±•åº“
https://gitee.com/openharmony-sig/flutter_engine
flutter packagesä»“
https://gitee.com/openharmony-sig/flutter_packages
flutter sample
https://gitee.com/openharmony-sig/flutter_samples

å¯¹äºFlutterçš„ç¬¬ä¸‰æ–¹åº“æ¥è¯´ï¼Œç¤¾åŒºä¹Ÿç»™å‡ºäº†é€‚é…çš„è®¡åˆ’è¡¨

https://docs.qq.com/sheet/DVVJDWWt1V09zUFN2?tab=BB08J2



https://www.yuque.com/xuyisheng